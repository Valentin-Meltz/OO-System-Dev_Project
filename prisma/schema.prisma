generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Address {
  id           Int           @id @default(autoincrement())
  address      String
  zipcode      String
  city         String

  members      Member[]
  competitions Competition[]
}

model Membership {
  id          Int     @id @default(autoincrement())
  name        String  @unique
  price       Float

  members     Member[]
}

model Licence {
  id          Int     @id @default(autoincrement())
  number      String  @unique
  type        String
  price       Float

  member      Member?
}

model Contact {
  id          Int       @id @default(autoincrement())
  firstname   String
  lastname    String
  phoneNumber String

  members     Member[]
}

model Member {
  id          Int        @id @default(autoincrement())
  email       String     @unique
  firstname   String
  lastname    String
  birthdate   DateTime
  phoneNumber String
  equipment   Boolean

  addressId   Int
  membershipId Int
  licenceId   Int?      @unique
  contactId   Int

  address     Address    @relation(fields: [addressId], references: [id])
  membership  Membership @relation(fields: [membershipId], references: [id])
  licence     Licence?   @relation(fields: [licenceId], references: [id])
  Contact     Contact    @relation(fields: [contactId], references: [id])
}

model Competition {
  id          Int       @id @default(autoincrement())
  club        String
  date        DateTime

  addressId Int

  address     Address   @relation(fields: [addressId], references: [id])
}